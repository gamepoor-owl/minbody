# M-Inbody - 실시간 게임 데미지 분석 도구

실시간으로 게임 패킷을 캡처하여 데미지 통계를 분석하고 웹 인터페이스로 시각화하는 도구입니다.

## 주요 기능

- **실시간 패킷 캡처**: TCP 포트 16000의 게임 트래픽을 실시간으로 캡처
- **데미지 통계 분석**: 유저별, 스킬별, 타겟별 데미지 집계
- **DPS 계산**: 실시간 DPS(Damage Per Second) 측정 및 차트 표시
- **웹 인터페이스**: 실시간 데이터 시각화 및 통계 표시
- **허수아비 모드**: 단일 타겟 테스트를 위한 특별 모드 지원

## 시스템 요구사항

- Java 17 이상
- 네트워크 패킷 캡처 권한 (관리자/root 권한 필요)
- 웹 브라우저 (Chrome, Firefox, Edge 등)

## 설치 및 실행

### 1. JAR 파일 실행

```bash
java -jar m-inbody-0.0.1-SNAPSHOT.jar
```

### 2. 웹 인터페이스 접속

브라우저에서 `http://localhost:5000` 접속

### 3. Windows 실행 스크립트

Windows 사용자는 제공된 배치 파일을 사용할 수 있습니다:

- `open_minbody.bat`: VMware 네트워크 자동 감지 및 웹 페이지 실행
- `minbody.bat`: 고정 IP (192.168.52.1) 사용

## 주요 화면 구성

### 1. 전체 통계
- 총 데미지
- 평균 DPS
- 전투 시간

### 2. 유저별 통계 테이블
- 직업별 데미지 통계
- 기여도 (%)
- DPS (현재/최소/최대)
- 타수, 치명타율, 추가타율

### 3. DPS 실시간 차트
- 시간대별 DPS 변화 그래프
- 유저별 색상 구분
- 마우스 휠로 확대/축소 가능

### 4. 스킬별 데미지 순위
- 카드형/테이블형 보기 전환
- 스킬별 상세 통계 (총합, 평균, 최대, 타수, 치명타율, 추가타율)
- 최근 데미지 히스토리

### 5. 스킬 사용 히스토리
- 시간순 스킬 사용 기록
- 데미지 및 상태 표시

## 옵션 설정

### 허수아비 모드
단일 타겟 테스트 시 사용. Self Damage 패킷을 기반으로 데미지 계산

### 상세 표시 모드
- 간단 표시: 억/만 단위로 숫자 축약
- 상세 표시: 전체 숫자를 콤마와 함께 표시

## 환경 변수

- `PACKET_CAPTURE_INTERFACE`: 패킷 캡처할 네트워크 인터페이스 지정
- `PACKET_CAPTURE_FILTER`: 패킷 필터 설정 (기본값: "tcp and src port 16000")
- `PACKET_MOCK_MODE`: 테스트용 모의 패킷 생성 모드 (true/false)

## 문제 해결

### 패킷 캡처가 안 되는 경우
1. 관리자 권한으로 실행하고 있는지 확인
2. 올바른 네트워크 인터페이스를 사용하는지 확인
3. 게임이 실행 중이고 포트 16000을 사용하는지 확인

### 웹 인터페이스 접속이 안 되는 경우
1. 방화벽에서 5000번 포트가 열려있는지 확인
2. 다른 프로그램이 5000번 포트를 사용하고 있는지 확인

## 빌드 방법

```bash
./gradlew build
```

빌드된 JAR 파일은 `build/libs/` 디렉토리에 생성됩니다.

## 라이선스

이 프로젝트는 개인 사용 목적으로 제작되었습니다.